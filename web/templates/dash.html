{% extends "base.html" %}

{% block title %}
    Dashboard
{% endblock %}

{% block page_header %}
    Dashboard
{% endblock %}

{% block css_imp %}

    <link href="{{ url_for('static',filename='dash_css_js/morris.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='dash_css_js/bootstrap.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='dash_css_js/core.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='dash_css_js/components.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='dash_css_js/icons.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='dash_css_js/pages.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='dash_css_js/menu.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='dash_css_js/responsive.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='dash_css_js/modernizr.css') }}" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

<style type="text/css">.jqstooltip {
    position: absolute;
    left: 0px;
    top: 0px;
    visibility: hidden;
    background: rgb(0, 0, 0) transparent;
    background-color: rgba(0, 0, 0, 0.6);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
    color: white;
    font: 10px arial, san serif;
    text-align: left;
    white-space: nowrap;
    padding: 5px;
    border: 1px solid white;
    z-index: 10000;
}

.jqsfield {
    color: white;
    font: 10px arial, san serif;
    text-align: left;
}</style>


{% endblock %}

{% block stats %}


{#<div class="wrapper">#}
    <div class="container">
{##}
{#        <!-- Page-Title -->#}
{#        <div class="row">#}
{#            <div class="col-sm-12">#}
{#                <div class="page-title-box">#}
{#                    <div class="btn-group pull-right">#}
{#                        <ol class="breadcrumb hide-phone p-0 m-0">#}
{#                            <li>#}
{#                                <a href="#">Adminox</a>#}
{#                            </li>#}
{#                            <li>#}
{#                                <a href="#">Pages</a>#}
{#                            </li>#}
{#                            <li class="active">#}
{#                                Starter Page#}
{#                            </li>#}
{#                        </ol>#}
{#                    </div>#}
{#                    <h4 class="page-title">Starter Page</h4>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <!-- end page title end breadcrumb -->#}


        <div class="row">
{#            <div class="col-lg-8">#}


                <div class="row">

                    {% for id in pies['graphes']['ids'] %}
                        {%   set index = loop.index %}
                        <div style="position: relative;" class="col-sm-4">
                            <div class="card-box widget-box-four">
                                <h4 class="header-title m-t-0 m-b-30">{{  pies['tables_names'][index - 1].replace('_',' ').title() }}</h4>
                                {# <canvas style="display: inline-block; width: 80px; height: 80px; vertical-align: top;"#}
                                {# width="80" height="80">#}

                                <div id="{{ id }}"></div>

                                {#                            </div>#}
                                <div class="wigdet-four-content pull-left">

{#                                    <h4 class="m-t-0 font-16 m-b-5 text-overflow" title="Number of Transactions">#}
{#                                        {{  pies['tables_names'][index - 1].replace('_',' ').title() }}#}
{##}
{##}
{#                                    </h4>#}


{#                                    <p class="font-secondary text-muted">Jan - Apr 2017</p>#}

                                    <h3 class="m-b-0 m-t-20"><span>Total : </span> <span data-plugin="counterup"> {{ pies['totals'].values()[index - 1] }}</span>
                                    </h3>
                                </div>


                                <div class="clearfix">

                                </div>

                            </div>
                        </div>
                        <!-- end col -->


                    {% endfor %}

                </div>
                <!-- end row -->


                <div class="row">
                    <div class="col-sm-12">


                        {% for id in bars['graphes']['ids'] %}
                            {%   set index = loop.index %}
                            <div class="card-box">
                                <h4 class="header-title m-t-0">{{ bars['tables_names'][index - 1].replace('_',' ').title() }}</h4>
                                <div class="text-center">

                                    <div class="row">

                                        {% for measure,totale in bars['totals'].items() %}

                                            <div class="col-xs-4">
                                                <div class="m-t-20 m-b-20">
                                                    <h4 class="m-b-10">{{ totale }}</h4>
                                                    <p class="text-uppercase m-b-5 font-13 font-600">{{ measure.replace('_',' ').title() }}</p>
                                                </div>
                                            </div>


                                        {% endfor %}

                                    </div>
                                </div>
                                <div style="height: 500px; position: relative;">

                                    <div id="{{ id }}"></div>

                                </div>
                            </div>
                        {% endfor %}

                    {% for id in lines['graphes']['ids'] %}
                        {%   set index = loop.index %}
                            <div class="card-box">
                                <h4 class="header-title m-t-0">{{ lines['tables_names'][index - 1].replace('_',' ').title() }}</h4>
                                <div class="text-center">
                                    <div class="row">

                                        {% for measure,total in lines['totals'].items() %}

                                            <div class="col-xs-4">
                                                <div class="m-t-20 m-b-20">
                                                    <h4 class="m-b-10">{{ total }}</h4>
                                                    <p class="text-uppercase m-b-5 font-13 font-600">{{ measure.replace('_',' ').title() }}</p>
                                                </div>
                                            </div>

                                        {% endfor %}

                                    </div>
                                </div>
                                <div style="height: 500px; position: relative;">

                                    <div id="{{ id }}"></div>

                                </div>
                            </div>
                        {% endfor %}


                    </div><!-- end col -->

                </div>
                <!-- end row -->

        </div>
        <!-- end row -->


        <div class="row">
            <div class="col-sm-12">
                <div class="card-box">
                    <h4 class="m-t-0 header-title"><b>Tableau indicateur</b></h4>
                    {# <p class="text-muted font-14 m-b-20">#}
                    {# Your awesome text goes here.#}
                    {# </p>#}

                    <div class="table-responsive">
                        {{ table_result | safe }}


                    </div>

                </div>

            </div>
        </div>

{#        <!-- Footer -->#}
{#        <footer class="footer text-right">#}
{#            <div class="container">#}
{#                <div class="row">#}
{#                    <div class="col-xs-12 text-center">#}
{#                        2017 Â© Adminox - Coderthemes.com#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        </footer>#}
{##}
{##}
{#        <!-- End Footer -->#}





    </div> <!-- end container -->
{#</div>#}
<!-- end wrapper -->



{% endblock %}

{% block js_t %}
<script src="{{ url_for('static',filename='dash_css_js/jquery_004.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/bootstrap.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/waves.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery_007.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery_002.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery_003.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery_006.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/excanvas.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery_010.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/morris.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/raphael-min.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery_008.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery_009.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery_005.js') }}"></script>
<script src="{{ url_for('static',filename='dash_css_js/jquery.js') }}"></script>



<script src="{{ url_for('static',filename='js/d3.min') }}"></script>
<script src="{{ url_for('static',filename='js/plotly-basic.js') }}"></script>



    <script type="text/javascript">
        var graphs = {{pies['graphes']['graph_json'] | safe}};
        var ids = {{pies['graphes']['ids'] | safe}};
{#        var tots = {{graphe['total'] | safe}};#}

        for (var i in graphs) {
            Plotly.plot(
                    ids[i], // the ID of the div, created above
                    graphs[i].data,
                    graphs[i].layout || {});
        }


        var graphs2 = {{bars['graphes']['graph_json'] | safe}};
        var ids2 = {{bars['graphes']['ids'] | safe}};

        for (var j in graphs2) {
            Plotly.plot(
                    ids2[j], // the ID of the div, created above
                    graphs2[j].data,
                    graphs2[j].layout || {});
        }

        var graphs3 = {{lines['graphes']['graph_json'] | safe}};
        var ids3 = {{lines['graphes']['ids'] | safe}};

        for (var h in graphs3) {
            Plotly.plot(
                    ids3[h], // the ID of the div, created above
                    graphs3[h].data,
                    graphs3[h].layout || {});
        }


    </script>



{% endblock %}